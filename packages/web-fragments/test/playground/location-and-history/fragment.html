<!doctype html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>bound fragment</title>
	</head>
	<body>
		<h2>bound fragment</h2>
		<p>location.href: <span id="href"></span></p>
		<p>popstate count: <span id="popstate">0</span></p>
		<button id="foo">go to /foo</button>
		<button id="bar">go to /bar</button>
		<script>
			function rerenderLocationHref() {
				document.getElementById('href').textContent = window.location.href;
			}

			setInterval(rerenderLocationHref, 100);

			let popstateCount = 0;
			window.addEventListener('popstate', () => {
				document.getElementById('popstate').textContent = ++popstateCount;
			});

			document.querySelector('button#foo').addEventListener('click', () => {
				history.pushState({}, '', '/foo');
			});
			document.querySelector('button#bar').addEventListener('click', () => {
				history.pushState({}, '', '/bar');
			});
		</script>
	</body>
</html>
